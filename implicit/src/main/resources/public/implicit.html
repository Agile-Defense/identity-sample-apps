<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<title>Implicit sample</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<style type="text/css">
table, th, td {
  border: 1px solid black;
  border-spacing: 0;
}
</style>
<script src="//ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<script type="text/javascript">
  function getFragment(pattern) {
    var matcher = new RegExp(pattern + "=([^&]+)");
    return matcher.exec(window.location.hash)[1];
  }

  function prettyToken(token) {
    return JSON.stringify(JSON.parse(atob(token.split('\.')[1])), null, '  ');
  }

	$(function() {
    $('#expires_in').text(getFragment("expires_in"));
    $('#scope').text(getFragment("scope"));
    $('#jti').text(getFragment("jti"));
    $('#id_token').text(prettyToken(getFragment("id_token")));

		var fullTokenBase64 = getFragment("access_token")
		$('#token').text(prettyToken(fullTokenBase64));
    $('#token_type').text(getFragment("token_type"));

		$('#profile').attr('href', uaaLocation + '/profile');
		$('#logout').attr('href', uaaLocation + '/logout.do');

	});
</script>
</head>
<body>
  <h1>Implicit sample</h1>
  <p>This is a static HTML page! The server only saw a request for /implicit.html. Everything after the # in the address bar is stuff that only your browser can see.</p>
  <p>Your ID Token token is:</p>
  <pre id="id_token"></pre>
  <p>Expires in:</p>
  <pre id="expires_in"></pre>
  <p>Scope:</p>
  <pre id="scope"></pre>
  <p>JTI:</p>
  <pre id="jti"></pre>

  <p>Your access token is:</p>
  <pre id="token"></pre>
  <p>Your access token type:</p>
  <pre id="token_type"></pre>

  <h2>What do you want to do?</h2>
  <ul>
    <li>
      <a id="profile" target="uaa" href="#">See your account profile on UAA (so you can de-authorize this client)</a>
    </li>
    <li>
      <a id="logout" target="uaa" href="#">Log out of UAA</a>
    </li>
  </ul>
</body>
</html>
